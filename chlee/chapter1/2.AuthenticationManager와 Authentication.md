ì´ì „ì—ëŠ” Authentication ê°ì²´ê°€ ì–´ë””ì— ìˆê³ , Authenticationì´ ë‹´ê³  ìˆëŠ” ì •ë³´ì— ëŒ€í•´ ì„¤ëª…í–ˆë‹¤ë©´,
ì§€ê¸ˆì€ ì‹¤ì œë¡œ Authenticationë¥¼ ë§Œë“¤ê³  ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” AuthenticationManagerì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

<aside>
ğŸ“– ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ìë©´, SecurityContextHolderëŠ” Authentication ì •ë³´ë¥¼ ë‹´ê³  ìˆê³ , AuthenticationManagerê°€ ì¸ì¦ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

</aside>

ì¸ì¦ì´ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ê³ , ì¸ì¦ì´ ì´ë£¨ì–´ì§€ëŠ” ê³¼ì • ì¤‘ì— ì–´ë–¤ ì¼ë“¤ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ë””ë²„ê±°ë¥¼ ì‚¬ìš©í•´ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

# 1. **AuthenticationManager**

```java
public interface AuthenticationManager {

	Authentication authenticate(Authentication authentication) throws AuthenticationException;

}
```

1. AuthenticationManager ì¸í„°í˜ì´ìŠ¤ ì•ˆì—ëŠ” authenticate ë©”ì†Œë“œ í•˜ë‚˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.
    - ì¸ìë¡œ ë°›ì€ Authentication ê°ì²´ê°€ ì¸ì¦ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.
        - í¼ ì¸ì¦ ê°™ì€ ê²½ìš°ì—ëŠ” ìœ ì €ê°€ ì…ë ¥í•œ IDì™€ PWë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.
    - ì •ë³´ê°€ ìœ íš¨í•œ ì¸ì¦ì¸ì§€ í™•ì¸ì„ í•˜ê³  ìœ íš¨í•˜ë‹¤ë©´ UserDetailsServiceê°€ ë¦¬í„´í•œ ê°ì²´ë¥¼ Principalë¡œ ë‹´ê³  ìˆëŠ” Authentication ê°ì²´ë¥¼ ë¦¬í„´í•´ì¤ë‹ˆë‹¤.
    - ì¸ì¦ì„ í™•ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ë¹„í™œì„± ê³„ì •(DisabledException), ì˜ëª»ëœ ë¹„ë²ˆ(BadCredentialsException), ì ê¸´ ê³„ì •(LockedException)ë“±ì˜ ì—ëŸ¬ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# 2. ProviderManager

AuthenticationManagerì˜ êµ¬í˜„ì²´ë¡œëŠ” ëŒ€ë¶€ë¶„ ê¸°ë³¸ êµ¬í˜„ì²´ì¸ ProviderManager ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë¬¼ë¡  ì§ì ‘ êµ¬í˜„ì²´ë¥¼ êµ¬í˜„í•  ì¼ì€ ê±°ì˜ ì—†ì§€ë§Œ, ProviderManagerë¥¼ ë³´ë©´ì„œ ì–´ë–»ê²Œ ì¸ì¦ì„ í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤.

```java
public class ProviderManager implements AuthenticationManager, MessageSourceAware, InitializingBean {

		...	

		@Override
		public Authentication authenticate(Authentication authentication) throws AuthenticationException { //...1
				Class<? extends Authentication> toTest = authentication.getClass();
				AuthenticationException lastException = null;
				AuthenticationException parentException = null;
				Authentication result = null;
				Authentication parentResult = null;
				int currentPosition = 0;
				int size = this.providers.size();
				for (AuthenticationProvider provider : getProviders()) { //...2
						if (!provider.supports(toTest)) {
								continue;
						}

						...
				}
				if (result == null && this.parent != null) {
				// Allow the parent to try.
				try {
						parentResult = this.parent.authenticate(authentication); //...3
						result = parentResult;
				}
				catch (ProviderNotFoundException ex) {
					
				...
	
				}
			
				...

		}
	
		//...3
		@Override
		public Authentication authenticate(Authentication authentication) throws AuthenticationException {
				Class<? extends Authentication> toTest = authentication.getClass();
				AuthenticationException lastException = null;
				AuthenticationException parentException = null;
				Authentication result = null;
				Authentication parentResult = null;
				int currentPosition = 0;
				int size = this.providers.size();
				for (AuthenticationProvider provider : getProviders()) {
						if (!provider.supports(toTest)) {
								continue;
						}
			
						...

						try {
								result = provider.authenticate(authentication); //...4
								if (result != null) {
										copyDetails(authentication, result);
										break;
								}
						}
						catch (AccountStatusException | InternalAuthenticationServiceException ex) {
						
						...

						}
		
						...
	
				}
			
				...

		}

		...

}
```

1. ì¸ìë¡œ ë°›ì€ Authentication ê°ì²´ì—ëŠ” ì…ë ¥í•œ ì •ë³´ê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.
    
    ![Untitled](%5B%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%84%8F%E1%85%B2%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%5D%20AuthenticationManager%20e2d634004a0340299192556d0bab6940/Untitled.png)
    
    ì…ë ¥í•œ ì •ë³´ëŠ” ID, PW 2ê°œë°–ì— ì—†ìœ¼ë‹ˆ ë‹¹ì—°íˆ authoritiesëŠ” ì—†ê³ , authenticatedëŠ” falseê² ì£ .
    
2. ì¸ì¦ì„ í•˜ëŠ”ë° ì¸ì¦ì„ ProviderManager ê°€ ì§ì ‘ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë˜ ë‹¤ë¥¸ ì—¬ëŸ¬ê°œì˜ AuthenticationProvider í•œí…Œ ìœ„ì„ì„ í•©ë‹ˆë‹¤.
    
    í˜„ì¬ ProviderManager ëŠ” AuthenticationProvider ë¡œ ë”± í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆëŠ”ë° ìµëª… ì‚¬ìš©ìë¥¼ ì¸ì¦í•˜ëŠ” AnonymousAuthenticationProvider ì…ë‹ˆë‹¤.
    
    ![Untitled](%5B%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%84%8F%E1%85%B2%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%5D%20AuthenticationManager%20e2d634004a0340299192556d0bab6940/Untitled%201.png)
    
    AnonymousAuthenticationProviderëŠ” ìš°ë¦¬ê°€ ë„˜ê²¨ì¤€ UsernamePasswordAuthenticationToken ì„ ì¸ì¦í•˜ì§€ ëª»í•©ë‹ˆë‹¤.
    
    í¼ì—ë‹¤ê°€ ì…ë ¥í•œ authentication ê°ì²´ëŠ” íƒ€ì…ì€ Authentication ì´ì§€ë§Œ ì‹¤ì œ í´ë˜ìŠ¤ëŠ” UsernamePasswordAuthenticationToken ì…ë‹ˆë‹¤.
    
    AnonymousAuthenticationProvider ëŠ” UsernamePasswordAuthenticationToken ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í”„ë¡œë°”ì´ë”ê°€ ì•„ë‹™ë‹ˆë‹¤.
    
    ì¦‰, ProviderManagerëŠ” Authentication ê°ì²´ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í”„ë¡œë°”ì´ë”ê°€ ì—†ìŠµë‹ˆë‹¤.
    
3. ì´ëŸ° ê²½ìš°ì—ëŠ” parentë¡œ ê°‘ë‹ˆë‹¤. parentì—ì„œ ì¸ì¦ì„ í•´ë‹¬ë¼ê³  í•©ë‹ˆë‹¤.
    
    2ì—ì„œ ë´¤ë˜ ProviderManager ì˜ parent ProviderManager ì…ë‹ˆë‹¤.
    
    <aside>
    â— ì½”ë“œëŠ” 2ì™€ 3ì´ ê°™ì€ ì½”ë“œì…ë‹ˆë‹¤. í¸ì˜ìƒ 2ë²ˆ ì¼ìŠµë‹ˆë‹¤.
    
    ---
    
    ì™œ ê°™ì€ ì½”ë“œì¸ì§€ ì¢€ ë” ìì„¸í•˜ê²Œ ë³¼ê¹Œìš”?
    
    ProviderManagerëŠ” providerë¥¼ ë‹´ì„ìˆ˜ ìˆëŠ” listíƒ€ì…ì˜ ë³€ìˆ˜ê°€ ì¡´ì¬í•˜ê³  AuthenticationManageríƒ€ì…ì˜ parentê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
    
    ìŠ¤í”„ë§ì´ ëœ° ë•Œ ProviderManager ê°€ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
    
    ë¨¼ì € ì½”ë“œ3ì„ ë‚˜íƒ€ë‚´ëŠ” ProviderëŠ” DaoAuthenticationProviderë¥¼ ë‹´ê³  ìˆê³  parentì†ì„±ì€ ë„ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    ê·¸ ì´í›„ì— ë‹¤ì‹œ AuthticationProvider ìƒì„±ë˜ëŠ” í•„í„°ë¡œ ëŒì•„ê°€ë©´ AnonymousAuthenticationProviderê°€ ìƒì„±ë˜ê³  ë‹¤ì‹œ ProviderManager ìƒì„±í•©ë‹ˆë‹¤. ì´ê²Œ ì½”ë“œ2ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ì£ .
    
    ì¦‰, AnonymousAuthenticationProviderë¥¼ ë‹´ì€ ë¦¬ìŠ¤íŠ¸ ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” ProviderManager ì™€ DaoAuthenticationProviderë¥¼ ê°€ì§€ê³  ìˆëŠ” ProviderManager 2ê°œê°€ ìƒì„±ëœê±¸ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    ì²˜ìŒì— ìƒì„±ëœ ProviderManagerê°€ ë¶€ëª¨ìš©ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ë‚˜ì¤‘ì— ìƒì„±ëœ ProviderManagerëŠ” ë¶€ëª¨ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê¸°ë³¸ê°’ì¸ ProviderManagerë¼ê³  ë³´ë©´ë©ë‹ˆë‹¤.
    
    </aside>
    
    ì—¬ê¸°ì—ëŠ” í”„ë¡œë°”ì´ë”ë¡œ DaoAuthenticationProvider ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    
    ![Untitled](%5B%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%84%8F%E1%85%B2%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%5D%20AuthenticationManager%20e2d634004a0340299192556d0bab6940/Untitled%202.png)
    
    DaoAuthenticationProviderëŠ” UsernamePasswordAuthenticationTokenë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
4. ê·¸ëŸ¼ ì‹¤ì œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” authenticateì„ í˜¸ì¶œí•©ë‹ˆë‹¤.
    
    authenticateì„ í˜¸ì¶œí•œ í”„ë¡œë°”ì´ë” ì•ˆì— ë“¤ì–´ì˜¤ë©´ AbstractUserDetailsAuthenticationProvider ì…ë‹ˆë‹¤.
    
    ì´ë¦„ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆë“¯ì´ UserDetailsServiceë¥¼ ì‚¬ìš©í•´ì„œ ì¸ì¦ì„ í•´ì£¼ëŠ” í”„ë¡œë°”ì´ë”ì…ë‹ˆë‹¤.
    

# 3. AbstractUserDetailsAuthenticationProvider

```java
public abstract class AbstractUserDetailsAuthenticationProvider
		implements AuthenticationProvider, InitializingBean, MessageSourceAware {

		...

		@Override
		public Authentication authenticate(Authentication authentication) throws AuthenticationException {
			Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication,
					() -> this.messages.getMessage("AbstractUserDetailsAuthenticationProvider.onlySupports",
							"Only UsernamePasswordAuthenticationToken is supported"));
			String username = determineUsername(authentication);
			boolean cacheWasUsed = true;
			UserDetails user = this.userCache.getUserFromCache(username);
			if (user == null) {
				cacheWasUsed = false;
				try {
					//...1
					user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);
				}
				catch (UsernameNotFoundException ex) {
```

1. retrieveUser ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ë©´ UserDetailsServiceë¡œ ë“œë””ì–´ ì—°ê²°ì´ ë©ë‹ˆë‹¤.
    
    retrieveUser ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ë©´ DaoAuthenticationProvider ë¡œ ë“¤ì–´ì˜¤ê²Œ ë©ë‹ˆë‹¤.
    

# 4. DaoAuthenticationProvider

```java
public class DaoAuthenticationProvider extends AbstractUserDetailsAuthenticationProvider {

		@Override
		protected final UserDetails retrieveUser(String username, UsernamePasswordAuthenticationToken authentication)
				throws AuthenticationException {
			prepareTimingAttackProtection();
			try {
				//...1,2
				UserDetails loadedUser = this.getUserDetailsService().loadUserByUsername(username);
				if (loadedUser == null) {
					throw new InternalAuthenticationServiceException(
							"UserDetailsService returned null, which is an interface contract violation");
				}
				return loadedUser; //...3
			}
			catch (UsernameNotFoundException ex) {
```

1. DaoAuthenticationProvider ê°€ì§€ê³  ìˆëŠ” UserDetailsServiceê°€ ë°”ë¡œ ìš°ë¦¬ê°€ ë§Œë“  UserDetailsServiceì˜ êµ¬í˜„ì²´ì¸ AccountServiceë¥¼ ë¦¬í„´í•˜ê²Œ ë©ë‹ˆë‹¤.
    
    ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œë¡œ ë“œë””ì–´ ì—°ê²°ì´ ëœ ê²ƒì…ë‹ˆë‹¤. ë°”ë¡œ ì´ ì§€ì ì— AccountServiceê°€ ë‚‘ê²¨ ë“¤ì–´ê°„ ê²ƒì…ë‹ˆë‹¤.
    
    - AccountService
    
    ```java
    package hello.springsecurityform.account;
    
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.security.core.userdetails.User;
    import org.springframework.security.core.userdetails.UserDetails;
    import org.springframework.security.core.userdetails.UserDetailsService;
    import org.springframework.security.core.userdetails.UsernameNotFoundException;
    import org.springframework.security.crypto.password.PasswordEncoder;
    import org.springframework.stereotype.Service;
    
    @Service
    public class AccountService implements UserDetailsService {
    
        @Autowired AccountRepository accountRepository;
    
        @Autowired PasswordEncoder passwordEncoder;
    
        @Override
        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
            Account account = accountRepository.findByUsername(username);
            if (account == null) {
                throw new UsernameNotFoundException(username);
            }
    
            return User.builder()
                    .username(account.getUsername())
                    .password(account.getPassword())
                    .roles(account.getRole())
                    .build();
        }
    
        public Account createNew(Account account) {
            account.encodePassword(passwordEncoder);
            return accountRepository.save(account);
        }
    }
    ```
    
    ì´ì œ ì¸ìë¡œ ë°›ì€ username ì„ ê°€ì§€ê³  ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ usernameì— í•´ë‹¹í•˜ëŠ” ìœ ì €ë§Œ ê°€ì§€ê³  ì˜¤ë©´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
    
2. ë¦¬í„´ì„ í•˜ë©´ loadedUserê°€ ë‚˜ì˜¤ê³  ë‹¹ì—°íˆ UserDetails íƒ€ì…ì…ë‹ˆë‹¤.
    
    ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë„ Principal ì •ë³´ë¥¼ í‘œí˜„í•  ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•˜ë‹ˆê¹Œ UserDetailsë¡œ ë§Œë“¤ì–´ ë‘” ê²ƒì´ê³  Principalê³¼ ê°œë°œìê°€ ë§Œë“  Account ì‚¬ì´ì˜ ì–´ëŒ‘í„° ì—­í• ì„ í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.
    
3. ì´ì œ ë§Œë“¤ì–´ì§„ loadedUserë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.

# 5. AbstractUserDetailsAuthenticationProvider

ë‹¤ì‹œ ëŒì•„ì™€ì„œ

```java
public abstract class AbstractUserDetailsAuthenticationProvider
		implements AuthenticationProvider, InitializingBean, MessageSourceAware {

		...

		@Override
		public Authentication authenticate(Authentication authentication) throws AuthenticationException {
			Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication,
					() -> this.messages.getMessage("AbstractUserDetailsAuthenticationProvider.onlySupports",
							"Only UsernamePasswordAuthenticationToken is supported"));
			String username = determineUsername(authentication);
			boolean cacheWasUsed = true;
			UserDetails user = this.userCache.getUserFromCache(username);
			if (user == null) {
				cacheWasUsed = false;
				try {
					user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);
				}
				catch (UsernameNotFoundException ex) {
				...
				}
			}

			...

			try {
				//...1
				this.preAuthenticationChecks.check(user);
				additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication);
			}
		
			...

			//...2			
			return createSuccessAuthentication(principalToReturn, authentication, user);
```

1. ì¶”ê°€ì ì¸ ì²´í¬ë¥¼ í•©ë‹ˆë‹¤.
    
    ë¹„í™œì„± ê³„ì •(DisabledException), ì˜ëª»ëœ ë¹„ë²ˆ(BadCredentialsException), ì ê¸´ ê³„ì •(LockedException)ë“±ì„ ì²´í¬í•©ë‹ˆë‹¤.
    
2. ê·¸ë¦¬ê³  ë¦¬í„´ì„ í•©ë‹ˆë‹¤.

# 6. ProviderManager

ë‹¤ì‹œ ëŒì•„ì™€ì„œ

```java
public class ProviderManager implements AuthenticationManager, MessageSourceAware, InitializingBean {

		...	

		@Override
		public Authentication authenticate(Authentication authentication) throws AuthenticationException {
				Class<? extends Authentication> toTest = authentication.getClass();
				AuthenticationException lastException = null;
				AuthenticationException parentException = null;
				Authentication result = null;
				Authentication parentResult = null;
				int currentPosition = 0;
				int size = this.providers.size();
				for (AuthenticationProvider provider : getProviders()) {
						if (!provider.supports(toTest)) {
								continue;
						}
			
						...

						try {
								result = provider.authenticate(authentication); //...1
								if (result != null) {
										copyDetails(authentication, result);
										break;
								}
						}
						catch (AccountStatusException | InternalAuthenticationServiceException ex) {
						
						...

						}
		
						...
	
				}
			
				...

				return result; //...1

		}

		...

}
```

1. resultì— ë¦¬í„´ ë°›ê³  ìµœì¢…ì ìœ¼ë¡œ resultë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
    
    resultê°€ ë°”ë¡œ AuthenticationManagerì˜ Authentication ê°ì²´ì…ë‹ˆë‹¤.
    
    - ì…ë ¥í•œ Authentication ê°ì²´
        
        ![Untitled](%5B%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%84%8F%E1%85%B2%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%5D%20AuthenticationManager%20e2d634004a0340299192556d0bab6940/Untitled%203.png)
        
        principalê°€ ë¬¸ìì—´ì…ë‹ˆë‹¤.
        
    - result
        
        ![Untitled](%5B%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B5%E1%84%8F%E1%85%B2%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%5D%20AuthenticationManager%20e2d634004a0340299192556d0bab6940/Untitled%204.png)
        
        principalê°€ AccountServiceì—ì„œ ë¦¬í„´í•œ User ê°ì²´ì…ë‹ˆë‹¤.
        

# 7. SampleService

```java
package hello.springsecurityform.form;

import org.springframework.security.core.Authentication;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Service;

import java.util.Collection;

@Service
public class SampleService {

    public void dashboardV1() {
				//...1
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        Object principal = authentication.getPrincipal();
        Collection<? extends GrantedAuthority> authorities = authentication.getAuthorities();
        Object credentials = authentication.getCredentials();
        boolean authenticated = authentication.isAuthenticated();
    }
}
```

1. ì—¬ê¸°ì—ì„œ Authentication ê°ì²´ë¥¼ êº¼ë‚´ë©´ ë°”ë¡œ ì§ì „ì— ë§Œë“  resultë¥¼ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.
    
    AuthenticationManagerê°€ ë¦¬í„´í•œ Authentication ê°ì²´ê°€ SecurityContextHolder ì•ˆì— ë“¤ì–´ìˆëŠ” ë°”ë¡œ ê·¸ ê°ì²´ì¸ ê²ƒì…ë‹ˆë‹¤.
    
    ì¸ì¦ì´ ë˜ì—ˆìœ¼ë‹ˆ SecurityContextHolder ì•ˆì—ë‹¤ê°€ ë„£ì–´ì¤€ ê²ƒì´ì£ 
    

ì´ë ‡ê²Œ ë””ë²„ê±°ë¥¼ ì‚¬ìš©í•´ì„œ AuthenticationManagerì™€ Authenticationì´ ì–´ë–»ê²Œ ë§ë¬¼ë ¤ì„œ ë™ì‘í•˜ëŠ”ì§€ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.